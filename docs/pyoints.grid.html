
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyoints.grid package &#8212; Pyoints version 0.2.0rc1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyoints.registration package" href="pyoints.registration.html" />
    <link rel="prev" title="pyoints.examples.file_examples package" href="pyoints.examples.file_examples.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyoints.registration.html" title="pyoints.registration package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pyoints.examples.file_examples.html" title="pyoints.examples.file_examples package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Pyoints version 0.2.0rc1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pyoints</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pyoints.html" accesskey="U">pyoints package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyoints-grid-package">
<h1>pyoints.grid package<a class="headerlink" href="#pyoints-grid-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyoints.grid.grid">
<span id="pyoints-grid-grid-module"></span><h2>pyoints.grid.grid module<a class="headerlink" href="#module-pyoints.grid.grid" title="Permalink to this headline">¶</a></h2>
<p>Handling of grided data like voxels or rasters.</p>
<dl class="class">
<dt id="pyoints.grid.grid.Grid">
<em class="property">class </em><code class="descclassname">pyoints.grid.grid.</code><code class="descname">Grid</code><span class="sig-paren">(</span><em>proj</em>, <em>rec</em>, <em>T=None</em>, <em>date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pyoints.html#pyoints.georecords.GeoRecords" title="pyoints.georecords.GeoRecords"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyoints.georecords.GeoRecords</span></code></a></p>
<p>Grid class extends GeoRecords to ease handling of matrices like rasters
or voxels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proj</strong> (<a class="reference internal" href="pyoints.html#pyoints.projection.Proj" title="pyoints.projection.Proj"><em>pyoints.projection.Proj</em></a>) – Projection object provides the geograpic projection of the grid.</li>
<li><strong>rec</strong> (<em>np.recarray</em>) – Multidimensional array of objects. Each cell of the matrix represents a
geo-object with <cite>k</cite> dimensional coordinates.</li>
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>, </em><em>k+1</em><em>)</em><em>)</em>) – A linear transformation matrix to transform the coordinates. The
translation represents the origin, the rotation represents the
orientation, and the scale represents the pixel size of the matrix.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyoints</span> <span class="k">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">transformation</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">projection</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Create a raster with a projection and a transformation matrix.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span> <span class="o">=</span> <span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;rst&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">raster</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">descr</span><span class="p">)</span>
<span class="go">[(&#39;values&#39;, &#39;&lt;i8&#39;), (&#39;coords&#39;, &#39;&lt;f8&#39;, (2,))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(4, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span>
<span class="go">[ 10.  20.]</span>
</pre></div>
</div>
<p>Get cell data of the raster.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 10.25  20.2 ]</span>
<span class="go">  [ 10.75  20.2 ]</span>
<span class="go">  [ 11.25  20.2 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  20.6 ]</span>
<span class="go">  [ 10.75  20.6 ]</span>
<span class="go">  [ 11.25  20.6 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  21.  ]</span>
<span class="go">  [ 10.75  21.  ]</span>
<span class="go">  [ 11.25  21.  ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  21.4 ]</span>
<span class="go">  [ 10.75  21.4 ]</span>
<span class="go">  [ 11.25  21.4 ]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="go">[[ 0  1  2]</span>
<span class="go"> [ 3  4  5]</span>
<span class="go"> [ 6  7  8]</span>
<span class="go"> [ 9 10 11]]</span>
</pre></div>
</div>
<p>Convert coordinates to indices and reverse.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords_to_keys</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">origin</span><span class="p">))</span>
<span class="go">[0 0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">keys_to_coords</span><span class="p">([</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">]))</span>
<span class="go">[ 10.  20.]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords_to_keys</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span>
<span class="go">[[[0 0]</span>
<span class="go">  [0 1]</span>
<span class="go">  [0 2]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[1 0]</span>
<span class="go">  [1 1]</span>
<span class="go">  [1 2]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[2 0]</span>
<span class="go">  [2 1]</span>
<span class="go">  [2 2]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[3 0]</span>
<span class="go">  [3 1]</span>
<span class="go">  [3 2]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">keys_to_coords</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">keys</span><span class="p">))</span>
<span class="go">[[[ 10.25  20.2 ]</span>
<span class="go">  [ 10.75  20.2 ]</span>
<span class="go">  [ 11.25  20.2 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  20.6 ]</span>
<span class="go">  [ 10.75  20.6 ]</span>
<span class="go">  [ 11.25  20.6 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  21.  ]</span>
<span class="go">  [ 10.75  21.  ]</span>
<span class="go">  [ 11.25  21.  ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 10.25  21.4 ]</span>
<span class="go">  [ 10.75  21.4 ]</span>
<span class="go">  [ 11.25  21.4 ]]]</span>
</pre></div>
</div>
<p>Usage of the spatial index.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dists</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">raster</span><span class="o">.</span><span class="n">indexKD</span><span class="p">()</span><span class="o">.</span><span class="n">knn</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
<span class="go">[ 0.32  0.65  0.78  0.96  1.03]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<span class="go">[0 3 1 4 6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">indices_to_keys</span><span class="p">(</span><span class="n">indices</span><span class="p">))</span>
<span class="go">[[0 0]</span>
<span class="go"> [1 0]</span>
<span class="go"> [0 1]</span>
<span class="go"> [1 1]</span>
<span class="go"> [2 0]]</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoRecords</span></code></p>
</div>
<dl class="method">
<dt id="pyoints.grid.grid.Grid.coords_to_coords">
<code class="descname">coords_to_coords</code><span class="sig-paren">(</span><em>coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.coords_to_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.coords_to_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets coordinate to closest grid coordinate.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">poynts.grid.coords_to_coords()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.coords_to_keys">
<code class="descname">coords_to_keys</code><span class="sig-paren">(</span><em>coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.coords_to_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.coords_to_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts coordinates to cell indices.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">poynts.grid.coords_to_keys()</span></code></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyoints.grid.grid.Grid.corners">
<code class="descname">corners</code><a class="headerlink" href="#pyoints.grid.grid.Grid.corners" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="pyoints.grid.grid.Grid.from_corners">
<em class="property">classmethod </em><code class="descname">from_corners</code><span class="sig-paren">(</span><em>proj</em>, <em>corners</em>, <em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.from_corners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.from_corners" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative constructor using grid corners.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proj</strong> (<a class="reference internal" href="pyoints.html#pyoints.projection.Proj" title="pyoints.projection.Proj"><em>pyoints.projection.Proj</em></a>) – Projection object provides the geographic projection of the grid.</li>
<li><strong>corners</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Desired <cite>k</cite> dimensional corners of the grid.</li>
<li><strong>scale</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Desired scale of the pixel cells.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.grid.Grid.from_extent" title="pyoints.grid.grid.Grid.from_extent"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Grid.from_extent()</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Derive a raster form corners with a positive scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corners</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scale</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raster</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">from_corners</span><span class="p">(</span><span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">(),</span> <span class="n">corners</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(4, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">descr</span><span class="p">))</span>
<span class="go">[(&#39;coords&#39;, &#39;&lt;f8&#39;, (2,))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
<span class="go">[[ 1.  0.  1.]</span>
<span class="go"> [ 0.  2.  2.]</span>
<span class="go"> [ 0.  0.  1.]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 1.5  3. ]</span>
<span class="go">  [ 2.5  3. ]</span>
<span class="go">  [ 3.5  3. ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 1.5  5. ]</span>
<span class="go">  [ 2.5  5. ]</span>
<span class="go">  [ 3.5  5. ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 1.5  7. ]</span>
<span class="go">  [ 2.5  7. ]</span>
<span class="go">  [ 3.5  7. ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 1.5  9. ]</span>
<span class="go">  [ 2.5  9. ]</span>
<span class="go">  [ 3.5  9. ]]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">corners</span><span class="p">)</span>
<span class="go">[[  1.   2.]</span>
<span class="go"> [  4.   2.]</span>
<span class="go"> [  4.  10.]</span>
<span class="go"> [  1.  10.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keys</span> <span class="o">=</span> <span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">to_global</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="go">[[ 0.  0.]</span>
<span class="go"> [ 3.  0.]</span>
<span class="go"> [ 3.  4.]</span>
<span class="go"> [ 0.  4.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">to_local</span><span class="p">(</span><span class="n">keys</span><span class="p">))</span>
<span class="go">[[  1.   2.]</span>
<span class="go"> [  4.   2.]</span>
<span class="go"> [  4.  10.]</span>
<span class="go"> [  1.  10.]]</span>
</pre></div>
</div>
<p>Example with inverted axes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyoints</span> <span class="k">import</span> <span class="n">transformation</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corners</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raster</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">from_corners</span><span class="p">(</span><span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">(),</span> <span class="n">corners</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">records</span><span class="p">()</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">[ 1.25  1.5 ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">records</span><span class="p">()</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">[ 2.75  3.5 ]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">det</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">decomposition</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">[ 3.  4.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">[ 0.5  1. ]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 2.75  3.5 ]</span>
<span class="go">  [ 2.25  3.5 ]</span>
<span class="go">  [ 1.75  3.5 ]</span>
<span class="go">  [ 1.25  3.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 2.75  2.5 ]</span>
<span class="go">  [ 2.25  2.5 ]</span>
<span class="go">  [ 1.75  2.5 ]</span>
<span class="go">  [ 1.25  2.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 2.75  1.5 ]</span>
<span class="go">  [ 2.25  1.5 ]</span>
<span class="go">  [ 1.75  1.5 ]</span>
<span class="go">  [ 1.25  1.5 ]]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">corners</span><span class="p">)</span>
<span class="go">[[ 3.  4.]</span>
<span class="go"> [ 1.  4.]</span>
<span class="go"> [ 1.  1.]</span>
<span class="go"> [ 3.  1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keys</span> <span class="o">=</span> <span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">to_global</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="go">[[ 4.  3.]</span>
<span class="go"> [ 0.  3.]</span>
<span class="go"> [ 0.  0.]</span>
<span class="go"> [ 4.  0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">to_local</span><span class="p">(</span><span class="n">keys</span><span class="p">))</span>
<span class="go">[[ 1.  1.]</span>
<span class="go"> [ 3.  1.]</span>
<span class="go"> [ 3.  4.]</span>
<span class="go"> [ 1.  4.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="pyoints.grid.grid.Grid.from_extent">
<em class="property">classmethod </em><code class="descname">from_extent</code><span class="sig-paren">(</span><em>proj</em>, <em>ext</em>, <em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.from_extent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.from_extent" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative constructor using grid corners.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proj</strong> (<a class="reference internal" href="pyoints.html#pyoints.projection.Proj" title="pyoints.projection.Proj"><em>pyoints.projection.Proj</em></a>) – Projection object provides the geographic projection of the grid.</li>
<li><strong>ext</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>2 * k</em><em>)</em><em>) or </em><em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Desired <cite>k</cite> dimensional extent of the gird. You can also specify
the extent by providing coordinates.</li>
<li><strong>scale</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Desired scale of the pixel cells.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.grid.Grid.from_corners" title="pyoints.grid.grid.Grid.from_corners"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Grid.from_corners()</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Defining a raster using a two dimensional extent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raster</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">from_extent</span><span class="p">(</span><span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">(),</span> <span class="n">extent</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">descr</span><span class="p">))</span>
<span class="go">[(&#39;coords&#39;, &#39;&lt;f8&#39;, (2,))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">raster</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 1.25  1.5 ]</span>
<span class="go">  [ 1.75  1.5 ]</span>
<span class="go">  [ 2.25  1.5 ]</span>
<span class="go">  [ 2.75  1.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 1.25  2.5 ]</span>
<span class="go">  [ 1.75  2.5 ]</span>
<span class="go">  [ 2.25  2.5 ]</span>
<span class="go">  [ 2.75  2.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 1.25  3.5 ]</span>
<span class="go">  [ 1.75  3.5 ]</span>
<span class="go">  [ 2.25  3.5 ]</span>
<span class="go">  [ 2.75  3.5 ]]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.indices_to_keys">
<code class="descname">indices_to_keys</code><span class="sig-paren">(</span><em>indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.indices_to_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.indices_to_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts cell indices to keys.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">poynts.grid.indices_to_keys()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.keys_to_coords">
<code class="descname">keys_to_coords</code><span class="sig-paren">(</span><em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.keys_to_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.keys_to_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts cell indices to coordinates.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">poynts.grid.keys_to_coords()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.keys_to_indices">
<code class="descname">keys_to_indices</code><span class="sig-paren">(</span><em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.keys_to_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.keys_to_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts grid keys to indices.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">poynts.grid.keys_to_indices()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.transform">
<code class="descname">transform</code><span class="sig-paren">(</span><em>T</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>self.dim+1</em><em>, </em><em>self.dim+1</em><em>)</em><em>)</em>) – Transformation matrix to apply.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Overwrites <cite>GeoRecords.transform</cite>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GeoRecords.transform()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.voxelize">
<code class="descname">voxelize</code><span class="sig-paren">(</span><em>rec</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.voxelize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.voxelize" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a point cloud to a voxel or raster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rec</strong> (<em>np.recarray</em><em>(</em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>)</em><em>)</em>) – Numpy record array of <cite>n</cite> points to voxelize. It requires the two
dimensional field ‘coords’ associated with <cite>k</cite> dimensional
coordinates.</li>
<li><strong>**kwargs</strong> – Arguments passed to voxelize.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.grid.voxelize" title="pyoints.grid.grid.voxelize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">voxelize()</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyoints</span> <span class="k">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">transformation</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">projection</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Create Grid.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtype</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span> <span class="o">=</span> <span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">),</span> <span class="n">T</span><span class="o">=</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 2.25  1.5 ]</span>
<span class="go">  [ 4.75  1.5 ]</span>
<span class="go">  [ 7.25  1.5 ]</span>
<span class="go">  [ 9.75  1.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 2.25  4.5 ]</span>
<span class="go">  [ 4.75  4.5 ]</span>
<span class="go">  [ 7.25  4.5 ]</span>
<span class="go">  [ 9.75  4.5 ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 2.25  7.5 ]</span>
<span class="go">  [ 4.75  7.5 ]</span>
<span class="go">  [ 7.25  7.5 ]</span>
<span class="go">  [ 9.75  7.5 ]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span>
<span class="go">[ 1.  0.]</span>
</pre></div>
</div>
<p>Create records to voxelize.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;coords&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span>
</pre></div>
</div>
<p>Voxelize the records and update the raster.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voxels</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">voxelize</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">voxels</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[ 0.   0. ]</span>
<span class="go"> [ 1.   0.5]</span>
<span class="go"> [ 2.   2. ]</span>
<span class="go"> [ 3.   2. ]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyoints.grid.grid.Grid.window_by_extent">
<code class="descname">window_by_extent</code><span class="sig-paren">(</span><em>extent</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#Grid.window_by_extent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.Grid.window_by_extent" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a subset of the grid within a given extent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extent</strong> (<a class="reference internal" href="pyoints.html#pyoints.extent.Extent" title="pyoints.extent.Extent"><em>Extent</em></a>) – Extent defining the window corners.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Desired subset.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#pyoints.grid.grid.Grid" title="pyoints.grid.grid.Grid">Grid</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyoints</span> <span class="k">import</span> <span class="n">transformation</span>
</pre></div>
</div>
<p>Create Grid.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span> <span class="o">=</span> <span class="n">projection</span><span class="o">.</span><span class="n">Proj</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[]),</span> <span class="n">T</span><span class="o">=</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">extent</span><span class="p">())</span>
<span class="go">[ 1.5  1.   5.5  7. ]</span>
</pre></div>
</div>
<p>Select subset by extent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">window_by_extent</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[[ 3.5  3. ]</span>
<span class="go">  [ 4.5  3. ]</span>
<span class="go">  [ 5.5  3. ]]</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go"> [[ 3.5  5. ]</span>
<span class="go">  [ 4.5  5. ]</span>
<span class="go">  [ 5.5  5. ]]]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyoints.grid.grid.voxelize">
<code class="descclassname">pyoints.grid.grid.</code><code class="descname">voxelize</code><span class="sig-paren">(</span><em>rec</em>, <em>T</em>, <em>shape=None</em>, <em>agg_func=None</em>, <em>dtype=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/grid.html#voxelize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.grid.voxelize" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregates a point cloud to a voxel or raster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rec</strong> (<em>np.recarray</em><em>(</em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>)</em><em>) or </em><a class="reference internal" href="pyoints.html#pyoints.georecords.GeoRecords" title="pyoints.georecords.GeoRecords"><em>GeoRecords</em></a>) – Numpy record array of <cite>n</cite> points to voxelize. It requires a two
dimensional field ‘coords’ associated with <cite>k</cite> dimensional coordinates.</li>
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>m+1</em><em>, </em><em>m+1</em><em>)</em><em>)</em>) – Transformation matrix defining the <cite>m &lt;= k</cite> dimensional voxel system.</li>
<li><strong>shape</strong> (<em>optional</em><em>, </em><em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>m</em><em>)</em><em>)</em>) – Shape of the output voxel space. If None, <cite>shape</cite> is fit to
<cite>rec.coords</cite>.</li>
<li><strong>agg_func</strong> (<em>optional</em><em>, </em><em>callable</em>) – Function to aggregate the record array. If None, <cite>agg_func</cite> set to
<cite>lambda ids: rec[ids]</cite>.</li>
<li><strong>dtype</strong> (<em>optional</em><em>, </em><em>np.dtype</em>) – Output data type. If None, set to automatically.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Desired <cite>m</cite> dimensional matrix. If <cite>rec</cite> is an instance of <cite>GeoRecords</cite>
and <cite>dtype</cite> has named fields, an instance of <cite>Grid</cite> is returned. If
no point falls within <cite>T</cite>, None is returned.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray or np.recarray(dtype=dtype) or <a class="reference internal" href="#pyoints.grid.grid.Grid" title="pyoints.grid.grid.Grid">Grid</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.grid.Grid" title="pyoints.grid.grid.Grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">Grid()</span></code></a>, <code class="xref py py-func docutils literal notranslate"><span class="pre">np.apply_function()</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyoints</span> <span class="k">import</span> <span class="n">transformation</span>
</pre></div>
</div>
<p>Create record array with coordinates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;coords&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span>
</pre></div>
</div>
<p>Voxelize records.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">voxelize</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[ 0.   0. ]</span>
<span class="go"> [ 1.   0.5]</span>
<span class="go"> [ 2.   2. ]]</span>
</pre></div>
</div>
<p>Voxelize with aggregation function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dtype</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">rec</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agg_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">ids</span><span class="p">:</span> <span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="n">ids</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">voxelize</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">agg_func</span><span class="o">=</span><span class="n">agg_func</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">descr</span><span class="p">)</span>
<span class="go">[(&#39;points&#39;, &#39;|O&#39;), (&#39;count&#39;, &#39;&lt;i8&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
<span class="go">[[3 2]</span>
<span class="go"> [1 0]</span>
<span class="go"> [0 1]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[ 0.   0. ]</span>
<span class="go"> [ 1.   0.5]</span>
<span class="go"> [ 2.   2. ]]</span>
</pre></div>
</div>
<p>Voxelize three dimensional coordinates to receive a two dimensional raster.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;coords&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">voxelize</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[ 0.   0.   1. ]</span>
<span class="go"> [-2.   0.3  5. ]</span>
<span class="go"> [ 2.   2.   3. ]]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-pyoints.grid.transformation">
<span id="pyoints-grid-transformation-module"></span><h2>pyoints.grid.transformation module<a class="headerlink" href="#module-pyoints.grid.transformation" title="Permalink to this headline">¶</a></h2>
<p>Conversion of coordinates to cell indices and reverse by applying
transformations.</p>
<dl class="function">
<dt id="pyoints.grid.transformation.coords_to_coords">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">coords_to_coords</code><span class="sig-paren">(</span><em>T</em>, <em>coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#coords_to_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.coords_to_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns coordinates with a raster grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>, </em><em>k+1</em><em>)</em><em>)</em>) – The transformation matrix of a <cite>k</cite> dimensional raster.</li>
<li><strong>coords</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Coordinates to align with a raster grid.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>coords</strong> – Desired coordinates aligned with the grid.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">array_like(Number, shape=(n, k))</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.transformation.coords_to_keys" title="pyoints.grid.transformation.coords_to_keys"><code class="xref py py-func docutils literal notranslate"><span class="pre">coords_to_keys()</span></code></a>, <a class="reference internal" href="#pyoints.grid.transformation.keys_to_coords" title="pyoints.grid.transformation.keys_to_coords"><code class="xref py py-func docutils literal notranslate"><span class="pre">keys_to_coords()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.coords_to_keys">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">coords_to_keys</code><span class="sig-paren">(</span><em>T</em>, <em>coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#coords_to_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.coords_to_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms coordinates to matrix indices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>,</em><em>k+1</em><em>)</em><em>)</em>) – A linear transformation matrix to transform the coordinates.
The translation represents the origin, the rotation represents the
orientation and the scale represents the pixel size of a raster.</li>
<li><strong>coords</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Coordinates with at least <cite>k</cite> dimensions to convert to indices.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>keys</strong> – Indices of the coordinates within the grid.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray(int, shape=(n, k))</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.transformation.keys_to_coords" title="pyoints.grid.transformation.keys_to_coords"><code class="xref py py-func docutils literal notranslate"><span class="pre">keys_to_coords()</span></code></a>, <a class="reference internal" href="#pyoints.grid.transformation.coords_to_coords" title="pyoints.grid.transformation.coords_to_coords"><code class="xref py py-func docutils literal notranslate"><span class="pre">coords_to_coords()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.corners_to_transform">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">corners_to_transform</code><span class="sig-paren">(</span><em>corners</em>, <em>scale=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#corners_to_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.corners_to_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a transformation matrix using the corners of a raster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>corners</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>2**k</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Corners of a <cite>k</cite> dimensional grid in a <cite>k</cite> dimensional space.</li>
<li><strong>scale</strong> (<em>optional</em><em>, </em><em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Optional scale to define the pixel resolution of a raster.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>T</strong> (<em>np.matrix(Number, shape=(k+1, k+1))</em>) – Desired transformation matrix.</li>
<li><strong>shape</strong> (<em>np.ndarray(int, shape=(k))</em>) – Shape of a grid required to cover all corners.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Create some corners.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">r</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="n">Extent</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span><span class="o">.</span><span class="n">corners</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corners</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
<span class="go">[[  3.   5.]</span>
<span class="go"> [  3.  15.]</span>
<span class="go"> [-17.  15.]</span>
<span class="go"> [-17.   5.]]</span>
</pre></div>
</div>
<p>Create transformation matrix without scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">corners_to_transform</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="go">[[ 0. -1.  3.]</span>
<span class="go"> [ 1.  0.  5.]</span>
<span class="go"> [ 0.  0.  1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
<span class="go">[20 10]</span>
</pre></div>
</div>
<p>Create transformation matrix with a scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">corners_to_transform</span><span class="p">(</span><span class="n">corners</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="go">[[ 0.  -2.   3. ]</span>
<span class="go"> [ 0.5  0.   5. ]</span>
<span class="go"> [ 0.   0.   1. ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
<span class="go">[10 20]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.extentinfo">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">extentinfo</code><span class="sig-paren">(</span><em>T</em>, <em>extent</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#extentinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.extentinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives information on a raster subset with given boundaries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>,</em><em>k+1</em><em>)</em><em>)</em>) – The transformation matrix of a <cite>k</cite> dimensional grid.</li>
<li><strong>extent</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>2 * k</em><em>)</em><em>)</em>) – Desired extent.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>T</strong> (<em>array_like(Number, shape=(k+1,k+1))</em>) – Extent of the original raster.</li>
<li><strong>origin_key</strong> (<em>array_like(int, shape=(k))</em>) – Key or index of the origin of the new transformation matrix.</li>
<li><strong>shape</strong> (<em>np.array(int, shape=(k))</em>) – Shape of the grid subset.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext</span> <span class="o">=</span> <span class="n">Extent</span><span class="p">([</span><span class="mi">150</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="p">,</span> <span class="n">min_corner_key</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">extentinfo</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="go">[[   2.    0.  150.]</span>
<span class="go"> [   0.   -2.  300.]</span>
<span class="go"> [   0.    0.    1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">min_corner_key</span><span class="p">)</span>
<span class="go">[-50  25]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
<span class="go">[26 26]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.indices_to_keys">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">indices_to_keys</code><span class="sig-paren">(</span><em>indices</em>, <em>shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#indices_to_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.indices_to_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts indices vector to keys of a matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>indices</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>)</em><em>)</em>) – Index vector to convert to matrix keys. Each element <cite>i</cite> specifies the
<cite>i</cite>-th`element in the matrix.</li>
<li><strong>shape</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Shape of output matrix.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Desired matrix keys associated with requested indices.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray(int, shape=shape)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.keys_to_coords">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">keys_to_coords</code><span class="sig-paren">(</span><em>T</em>, <em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#keys_to_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.keys_to_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts indices of raster cells to coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>,</em><em>k+1</em><em>)</em><em>)</em>) – The transformation matrix of a <cite>k</cite> dimensional raster.</li>
<li><strong>keys</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>n</em><em>, </em><em>k</em><em>)</em><em>)</em>) – Indices of <cite>n</cite> raster cells.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>coords</strong> – Desired coordinates of the raster cells.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">array_like(Number, shape=(n, k))</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#pyoints.grid.transformation.coords_to_keys" title="pyoints.grid.transformation.coords_to_keys"><code class="xref py py-func docutils literal notranslate"><span class="pre">coords_to_keys()</span></code></a>, <a class="reference internal" href="#pyoints.grid.transformation.coords_to_coords" title="pyoints.grid.transformation.coords_to_coords"><code class="xref py py-func docutils literal notranslate"><span class="pre">coords_to_coords()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.keys_to_indices">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">keys_to_indices</code><span class="sig-paren">(</span><em>keys</em>, <em>shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#keys_to_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.keys_to_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts matrix keys to indices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<em>array_like</em><em>(</em><em>int</em><em>)</em>) – Keys of matrix.</li>
<li><strong>shape</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Shape of the input matrix.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Desired indices vector associated with the requested keys.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray(int)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyoints.grid.transformation.transform_to_corners">
<code class="descclassname">pyoints.grid.transformation.</code><code class="descname">transform_to_corners</code><span class="sig-paren">(</span><em>T</em>, <em>shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyoints/grid/transformation.html#transform_to_corners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyoints.grid.transformation.transform_to_corners" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the corners of a grid based on a transformation matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>T</strong> (<em>array_like</em><em>(</em><em>Number</em><em>, </em><em>shape=</em><em>(</em><em>k+1</em><em>, </em><em>k+1</em><em>)</em><em>)</em>) – Transformation matrix in a <cite>k</cite> dimensional space.</li>
<li><strong>shape</strong> (<em>array_like</em><em>(</em><em>int</em><em>, </em><em>shape=</em><em>(</em><em>k</em><em>)</em><em>)</em>) – Desired shape of the grid</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">[[  0.5   0.   10. ]</span>
<span class="go"> [  0.    2.   20. ]</span>
<span class="go"> [  0.    0.    1. ]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corners</span> <span class="o">=</span> <span class="n">transform_to_corners</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
<span class="go">[[  10.   20.]</span>
<span class="go"> [ 110.   20.]</span>
<span class="go"> [ 110.  220.]</span>
<span class="go"> [  10.  220.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_rounded</span><span class="p">(</span><span class="n">coords_to_keys</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">corners</span><span class="p">))</span>
<span class="go">[[  0   0]</span>
<span class="go"> [  0 200]</span>
<span class="go"> [100 200]</span>
<span class="go"> [100   0]]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-pyoints.grid">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyoints.grid" title="Permalink to this headline">¶</a></h2>
<p>Handling of grid objects like image rasters or voxels.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_pyoints.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyoints.grid package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pyoints.grid.grid">pyoints.grid.grid module</a></li>
<li><a class="reference internal" href="#module-pyoints.grid.transformation">pyoints.grid.transformation module</a></li>
<li><a class="reference internal" href="#module-pyoints.grid">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pyoints.examples.file_examples.html"
                        title="previous chapter">pyoints.examples.file_examples package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyoints.registration.html"
                        title="next chapter">pyoints.registration package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pyoints.grid.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyoints.registration.html" title="pyoints.registration package"
             >next</a> |</li>
        <li class="right" >
          <a href="pyoints.examples.file_examples.html" title="pyoints.examples.file_examples package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Pyoints version 0.2.0rc1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pyoints</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pyoints.html" >pyoints package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Sebastian Lamprecht.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>